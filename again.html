<!DOCTYPE html>
<html>
<head>
  <title>Flight History: Venn Diagram & Network Graph</title>
  <style>
    .venn-circle { opacity: 0.5; }
    .venn-label { font-family: sans-serif; font-size: 14px; text-anchor: middle; pointer-events: none; /* Prevent text from interfering with clicks */}
    .node { stroke: #fff; stroke-width: 1.5px; }
    .link { stroke: #999; stroke-opacity: 0.6; }
    #tooltip {
        position: absolute;
        background-color: white;
        border: 1px solid black;
        padding: 5px;
        font-family: sans-serif;
        font-size: 12px;
        pointer-events: none; /* Important! */
        display: none; /* Initially hidden */
    }
  </style>
</head>
<body>

<div id="tooltip"></div>
<svg width="800" height="600" id="visualization"></svg>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/venn.js/0.2.20/venn.min.js"></script> <script>
  <script src="timelineData.js"></script>
// Your timelineItems data (paste it here or load from a separate file)
window.timelineItems = [
    {
        date: '2700s BCE',
        location: 'China',
        title: 'Silk Production and Trade',
        description: 'Chinese silk becomes a prized lightweight...',
        img: 'img/silk.jpg',
        people: ['Legendary Empress Leizu (mythical)'],
        category: 'Conceptual & Scientific Breakthroughs',
        connections: [
            "Early Kites",
            "Bartolomeu de Gusmão's Passarola",
            "Montgolfier Brothers' Hot Air Balloon",
            "Henri Giffard's Dirigible",
            "Charles Renard and Arthur Constantin's Le France",
        ],
        group: "CSB", // Add a 'group' property for Venn diagram
        row: 1
    },
    {
        date: '100s BCE',
        location: 'China',
        title: 'Paper Production and Trade',
        description: 'Paper is invented in China and then spreads to the Arabic world in the 700s BC, then to Medieval Europe...',
        img: "/api/placeholder/100/100",
        people: ['Mozi', 'Lu Ban'],
        category: 'Conceptual & Scientific Breakthroughs',
        group: "CSB",
        row: 1,
        connections: ['Early Kites', "Kongming's Sky Lantern", "Leonardo da Vinci's Flying Machines"]
    },
  {
    date: '500s BCE',
    location: 'China',
    title: 'Early Kites',
    description: 'Kites are invented in China, an early form of human flight.',
    img: "/api/placeholder/100/100",
    people: ['Mozi', 'Lu Ban'],
    category: 'Engineering Experiments & Demonstrations',
    group: 'EED',
    row: 1,
    connections: ['Paper Production and Trade']
  },
  {
    date: '500s BCE',
    location: 'India',
    title: 'The Pushpaka Vimana',
    description: 'A mythical self-moving aerial vehicle described in the Ramayana epic...',
    img: "/api/placeholder/100/100",
    people: ['The Pushpaka Vimana'],
    category: 'Sociocultural Factors',
        group: 'SF',
    row: 1,
    connections: ["Abbas Ibn Firnas's jump", "Eilmer of Malmesbury's jump", "João Torto's Failed Flight Attempt"]
  },
  {
    date: '500s BCE',
    location: 'Greece',
    title: 'The Myth of Icarus and Daedalus',
    description: 'This myth, often depicted in classical art and referenced by poets and playwrights...',
    img: "/api/placeholder/100/100",
    people: ['The Myth of Icarus and Daedalus'],
    category: 'Sociocultural Factors',
    group: 'SF',
    row: 1,
    connections: ["Abbas Ibn Firnas's jump", "Eilmer of Malmesbury's jump", "João Torto's Failed Flight Attempt"]
  },
  {
    date: '400s BCE',
    location: 'Tarentum, Italy',
    title: "Archytas' Flying Pigeon",
    description: "Archytas of Tarentum creates a wooden pigeon that could \"fly\" using a jet of air.",
    img: "/api/placeholder/100/100",
    people: ['Archytas of Tarentum'],
    category: 'Engineering Experiments & Demonstrations',
    group: 'EED',
    row: 1,
    connections: ['The Myth of Icarus and Daedalus']
  },
  {
    date: '200s BCE',
    location: 'Syracuse, Sicily',
    title: "Archimedes' Buoyancy Principle",
    description: "Archimedes discovers the principles of buoyancy, which later influence theories of flight.",
    img: "/api/placeholder/100/100",
    people: ['Archimedes'],
    category: 'Conceptual & Scientific Breakthroughs',
    group: 'CSB',
    row: 1,
    connections: ["Roger Bacon's Air Support Theory", "Robert Hooke's Airflow"]
  },
  {
    date: '200s BCE',
    location: 'China',
    title: "Kongming's Sky Lantern",
    description: "Kongming invents the sky lantern, the first hot air balloon. From its military use, it became known as the Kongming lantern.",
    img: "/api/placeholder/100/100",
    people: ['Kongming'],
    category: 'Engineering Experiments & Demonstrations',
    group: 'EED',
    row: 1,
    connections: ['Early Kites', 'Paper Production and Trade']
  },
  {
    date: '100s',
    location: 'Alexandria, Egypt',
    title: "Hero's Aeolipile",
    description: "Hero of Alexandria designs the aeolipile, a simple steam turbine. While not used for flight, it demonstrated the potential of steam power.",
    img: "/api/placeholder/100/100",
    people: ['Hero of Alexandria'],
    category: 'Engineering Experiments & Demonstrations',
    group: 'EED',
    row: 1,
    connections: ["Archytas' Flying Pigeon", "Henri Giffard's Dirigible"]
  },
  {
    date: '800s',
    location: 'Spain',
    title: "Abbas Ibn Firnas's jump",
    description: "Abbas Ibn Firnas jumps from a tower wearing a cloak stiffened with wooden struts...",
    img: "/api/placeholder/100/100",
    people: ['Abbas Ibn Firnas'],
    category: 'Engineering Experiments & Demonstrations',
    group: 'EED',
    row: 2,
    connections: ["The Myth of Icarus and Daedalus", "Eilmer of Malmesbury's jump", "João Torto's Failed Flight Attempt"]
  },
  {
    date: '800s',
    location: 'Middle East and India',
    title: 'The Ebony Horse Tale',
    description: "One of the tales from One Thousand and One Night. An inventor presents a magical mechanical horse to a Persian king...",
    img: "/api/placeholder/100/100",
    people: ['The Ebony Horse'],
    category: 'Sociocultural Factors',
        group: 'SF',
    row: 2,
    connections: ["Abbas Ibn Firnas's jump", "Eilmer of Malmesbury's jump", "João Torto's Failed Flight Attempt"]  // No connections here.
  },
  {
    date: '900s',
    location: 'China',
    title: 'Gunpowder Invention',
    description: "Invented in China for fireworks and warfare, gunpowder also sowed the seed for rocketry...",
    img: '/api/placeholder/100/100',
    people: ['Chinese Alchemists'],
    category: 'Conceptual & Scientific Breakthroughs',
        group: 'CSB',
    connections: [],
    row: 2
  },
  {
    date: '1000s',
    location: 'England',
    title: "Eilmer of Malmesbury's jump",
    description: "A Benedictine monk who tries to fly with a glider-like apparatus. He may have glided a short distance...",
    img: "/api/placeholder/100/100",
    people: ['Eilmer of Malmesbury'],
    category: 'Engineering Experiments & Demonstrations',
    group: 'EED',
    row: 2,
    connections: ["The Myth of Icarus and Daedalus", "Abbas Ibn Firnas's jump", "João Torto's Failed Flight Attempt"]
  },
  {
    date: '1290s',
    location: 'England',
    title: "Roger Bacon's Air Support Theory",
    description: "Roger Bacon theorizes that air can support objects like water supports boats.",
    img: "/api/placeholder/100/100",
    people: ['Roger Bacon'],
    category: 'Conceptual & Scientific Breakthroughs',
    group: 'CSB',
    row: 2,
    connections: ["Archimedes' Buoyancy Principle", "Robert Hooke's Airflow"]
  },
  {
    date: '1440s',
    location: 'Mainz, Germany',
    title: "Gutenberg's Printing Press",
    description: "Johannes Gutenberg develops the movable-type printing press, drastically speeding the circulation of new ideas...",
    img: '/api/placeholder/100/100',
    people: ['Johannes Gutenberg'],
    category: 'Conceptual & Scientific Breakthroughs',
        group: 'CSB',
    connections: ['Paper Production and Trade'],
    row: 2
  },
  {
    date: '1480s',
    location: 'Italy',
    title: "Leonardo da Vinci's Flying Machines",
    description: "Leonardo da Vinci sketches various flying machines, including an ornithopter and a precursor to the helicopter.",
    img: "/api/placeholder/100/100",
    people: ['Leonardo da Vinci'],
    category: 'Sociocultural Factors',
    group: "SF",
    row: 2,
    connections: ['Paper Production and Trade']
  },
  {
    date: '1540s',
    location: 'Portugal',
    title: "João Torto's Failed Flight Attempt",
    description: "João Torto, a Portuguese barber, attempts human flight with fabric wings but falls to his death.",
    img: "/api/placeholder/100/100",
    people: ['João Torto'],
    category: 'Engineering Experiments & Demonstrations',
    group: 'EED',
    row: 2,
    connections: ["The Myth of Icarus and Daedalus", "Abbas Ibn Firnas's jump", "Eilmer of Malmesbury's jump", "João Torto's Failed Flight Attempt"]
  },
{
    date: '17th–19th Centuries',
    location: 'Europe',
    title: 'The Gentleman Scientist Tradition',
    description: 'Wealthy or well-connected amateurs (often aristocrats) pursued scientific research as a leisure activity...',
    img: '/api/placeholder/100/100',
    people: ['Sir George Cayley'],
    category: 'Sociocultural Factors',
    group: 'SF',
    connections: [],
    row: 2
},
  {
    date: '1634',
    location: 'Holy Roman Empire',
    title: "Kepler's Somnium",
    description: "One of the first “proto–science fiction” works. A fictional narrative describing a journey to the Moon...",
    img: "/api/placeholder/100/100",
    people: ['Johannes Kepler'],
    category: 'Sociocultural Factors',
    group: 'SF',
    row: 2,
    connections: [] // No connections here.
  },
  {
    date: '1638',
    location: 'England',
    title: "Francis Godwin's The Man in the Moone",
    description: "One of the first “proto–science fiction” works. A utopian story describing lunar travel using large, trained birds...",
    img: "/api/placeholder/100/100",
    people: ['Francis Godwin'],
    category: 'Sociocultural Factors',
    group: 'SF',
    row: 2,
    connections: [] // No connections here.
  },
{
    date: '1657',
    location: 'France',
    title: "Cyrano de Bergerac's Comical History of the States and Empires of the Moon",
    description: "One of the first “proto–science fiction” works. Although comedic, it proposed mechanical means of leaving Earth...",
    img: "/api/placeholder/100/100",
    people: ['Cyrano de Bergerac'],
    category: 'Sociocultural Factors',
    group: 'SF',
    row: 2,
    connections: [] // No connections here.
},
        {
        date: '1659',
        location: 'England',
        title: 'Robert Hooke\'s Airflow',
        description: 'Robert Hooke investigates concepts of drag and airflow, contributing to the body of knowledge that would eventually be applied to flight.',
        img: "/api/placeholder/100/100",
        people: ['Robert Hooke'],
        category: 'Conceptual & Scientific Breakthroughs',
        group: 'CSB',
        row: 2,
        connections: ["Archimedes' Buoyancy Principle","Roger Bacon's Air Support Theory"] // No connections here.
    },
    {
        date: '1687',
        location: 'England',
        title: 'Newton\'s Laws of Motion',
        description: 'Lays out the three laws of motion and universal gravitation, essential to understanding how and why aircraft can generate lift...',
        img: "/api/placeholder/100/100",
        people: ['Isaac Newton'],
        category: 'Conceptual & Scientific Breakthroughs',
        group: 'CSB',
        row: 2,
        connections: [] // No connections here.
    },
    {
        date: '1709',
        location: 'Portugal',
        title: 'Bartolomeu de Gusmão\'s Passarola',
        description: 'Bartolomeu de Gusmão, a Brazilian-Portuguese priest, demonstrates a hot air balloon prototype called the "Passarola."',
        img: "/api/placeholder/100/100",
        people: ['Bartolomeu de Gusmão'],
        category: 'Engineering Experiments & Demonstrations',
        group: 'EED',
        row: 3,
        connections: ["Kongming's Sky Lantern", "Archimedes' Buoyancy Principle"]
    },
        {
        date: '1726',
        location: 'England',
        title: 'Jonathan Swift\'s Flying Island of Laputa',
        description: 'Though satire, Laputa symbolizes the human longing to master flight and the sky—exaggerated to the point of political power...',
        img: "/api/placeholder/100/100",
        people: ['Jonathan Swift'],
        category: 'Sociocultural Factors',
            group: 'SF',
        row: 3,
        connections: [] // No connections here.
    },
    {
        date: '1738',
        location: 'Switzerland/Netherlands',
        title: 'Daniel Bernoulli\'s Hydrodynamica',
        description: 'Describes how pressure in a moving fluid decreases as velocity increases; foundational for many aerodynamic analyses of wing lift.',
        img: "/api/placeholder/100/100",
        people: ['Daniel Bernoulli'],
        category: 'Conceptual & Scientific Breakthroughs',
        group: 'CSB',
        row: 3,
        connections: [] // No connections here.
    },
{
  date: '1760–1840',
  location: 'Great Britain',
  title: 'Industrial Revolution',
  description: 'Steam power revolutionizes manufacturing and metallurgy, providing mass production methods and mechanical expertise that future aircraft builders would rely on.',
  img: '/api/placeholder/100/100',
  people: ['James Watt', 'Matthew Boulton'],
  category: 'Conceptual & Scientific Breakthroughs',
    group: 'CSB',
  connections: ["Hero's Aeolipile"],
  row: 3
},
  {
    date: '1783',
    location: 'France',
title: "Montgolfier Brothers' Hot Air Balloon",
    description: "Jean-François Pilâtre de Rozier and François Laurent d'Arlandes make the first manned flight in a hot air balloon built by the Montgolfier brothers.",
    img: "/api/placeholder/100/100",
    people: ['Jean-François Pilâtre de Rozier', "François Laurent d'Arlandes", 'Joseph-Michel Montgolfier', 'Jacques-Étienne Montgolfier'],
        group: 'EED',
    row: 4,
    category: 'Engineering Experiments & Demonstrations',
    connections: ["Kongming's Sky Lantern"]
  },
  {
    date: '1799',
    location: 'England',
    title: "George Cayley's Glider Design",
    description: "George Cayley designs the first modern glider with distinct lift, thrust, and control components.",
    img: "/api/placeholder/100/100",
    people: ['George Cayley'],
    row: 4,
    connections: ['Early Kites'],
    group: 'CSB',
    category: "Conceptual & Scientific Breakthroughs"
  },
  {
    date: '1839',
    location: 'United States',
    title: "Goodyear's Vulcanization of Rubber",
    description: "Charles Goodyear discovers how to vulcanize rubber, producing stronger, more elastic material...",
    img: '/api/placeholder/100/100',
    people: ['Charles Goodyear'],
    category: 'Conceptual & Scientific Breakthroughs',
    group: 'CSB',
    connections: ['Industrial Revolution'],
    row: 4
  },
{
  date: '1851',
  location: 'London, England',
  title: 'The Great Exhibition',
  description: 'An international fair showcasing industrial inventions.  Events like this spurred global interest...',
  img: '/api/placeholder/100/100',
  people: ['Prince Albert', 'Henry Cole'],
  category: 'Sociocultural Factors',
    group: 'SF',
  connections: ['Industrial Revolution'],
  row: 4
},
{
  date: '1852',
  location: 'France',
  title: "Henri Giffard's Dirigible",
  description: "Henri Giffard invents the first controllable dirigible powered by a steam engine.",
  img: "/api/placeholder/100/100",
  people: ['Henri Giffard'],
  row: 5,
  connections: ["Hero's Aeolipile"],
    group: 'EED',
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1843',
  location: 'England',
  title: "William Henson's Aircraft Design",
  description: "William Henson patents an early aircraft design with fixed wings and a steam-powered engine.",
  img: "/api/placeholder/100/100",
  people: ['William Henson'],
  row: 6,
  connections: ["Hero's Aeolipile"],
  group: 'EED',
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1853',
  location: 'England',
  title: "George Cayley's Manned Glider Flight",
  description: "George Cayley successfully flies the first manned glider. Developed principles of lift, drag, and fixed-wing aircraft.",
  img: "/api/placeholder/100/100",
  people: ['George Cayley'],
  row: 7,
  connections: ["George Cayley's Glider Design"],
    group: 'EED',
  category: "Engineering Experiments & Demonstrations"
},
{
 date: '1865-1904',
 location: 'England',
 title: "Jules Verne's Novels",
 description: "Verne’s meticulous detail and semi-scientific style enthralled readers...",
 img: "/api/placeholder/100/100",
 people: ['Jules Verne'],
 row: 7,
 connections: [],
    group: 'SF',
 category: "Sociocultural Factors"
},
{
  date: '1871',
  location: 'England',
  title: "Francis Wenham's Wind Tunnel",
  description: "Francis Wenham builds the first wind tunnel to study aerodynamics. Proved that long, narrow wings generate more lift.",
  img: "/api/placeholder/100/100",
  people: ['Francis Wenham'],
  row: 7,
    group: 'CSB',
  connections: [],
  category: "Conceptual & Scientific Breakthroughs"
},
{
  date: '1884',
  location: 'France',
  title: "Charles Renard and Arthur Constantin's Le France",
  description: "Charles Renard and Arthur Constantin Krebs launch a non-rigid airship that inspires Zeppelin.",
  img: "/api/placeholder/100/100",
  people: ['Charles Renard', 'Arthur Constantin Krebs'],
  row: 7,
  connections: [],
    group: 'EED',
  category: "Engineering Experiments & Demonstrations"
},
  {
    date: '1885',
    location: 'Coventry, England',
    title: 'Safety Bicycle Revolution',
    description: 'John Kemp Starley produces the “safety bicycle.” This sparks a bicycle boom...',
    img: '/api/placeholder/100/100',
    people: ['John Kemp Starley'],
    category: 'Engineering Experiments & Demonstrations',
        group: 'EED',
    connections: [],
    row: 7
  },
  {
    date: '1886',
    location: 'United States/France',
    title: 'Hall–Héroult Process for Aluminum',
    description: 'Charles Martin Hall and Paul Héroult separately discover a cost-effective method to produce aluminum...',
    img: '/api/placeholder/100/100',
    people: ['Charles Martin Hall', 'Paul Héroult'],
    category: 'Conceptual & Scientific Breakthroughs',
        group: 'CSB',
    connections: ['Industrial Revolution'],
    row: 7
  },
{
  date: '1891',
  location: 'Germany',
  title: "Otto Lilienthal's Glider Flights",
  description: "Otto Lilienthal achieves controlled glider flights and documents aerodynamic research, proving human flight was possible.",
  img: "/api/placeholder/100/100",
  people: ['Otto Lilienthal'],
  row: 7,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
 date: '1896',
 location: 'United States',
 title: "Octave Chanute's Biplane Glider",
 description: "Octave Chanute advances glider designs and builds a successful biplane glider, improving aviation theories.",
 img: "/api/placeholder/100/100",
 people: ['Octave Chanute'],
 row: 7,
    group: 'EED',
 connections: [],
 category: "Engineering Experiments & Demonstrations"
},
{
  date: '1890',
  location: 'France',
  title: "Clément Ader's Éole",
  description: "Clément Ader builds the Éole, a bat-like steam-powered aircraft, which briefly lifts off but lacks control.",
  img: "/api/placeholder/100/100",
  people: ['Clément Ader'],
  row: 8,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1894',
  location: 'United States/United Kingdom',
  title: "Hiram Maxim's Steam-Powered Biplane",
  description: "Hiram Maxim builds and tests a massive steam-powered biplane but fails to achieve sustained flight.",
  img: "/api/placeholder/100/100",
  people: ['Hiram Maxim'],
  row: 8,
  connections: [],
    group: 'EED',
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1896',
  location: 'United States',
  title: "Samuel Pierpont Langley's Aerodrome",
  description: "Samuel Pierpont Langley flies small, unmanned models successfully. Built the Aerodrome A, which failed at full scale.",
  img: "/api/placeholder/100/100",
  people: ['Samuel Pierpont Langley'],
  row: 8,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1899',
  location: 'United Kingdom',
  title: "Percy Pilcher's Powered Aircraft Design",
  description: "Percy Pilcher designs a powered aircraft but dies in a glider accident before testing it.",
  img: "/api/placeholder/100/100",
  people: ['Percy Pilcher'],
  row: 9,
    group: 'CSB',
  connections: [],
  category: "Conceptual & Scientific Breakthroughs"
},
{
  date: '1900',
  location: 'Germany',
  title: "Ferdinand von Zeppelin's Rigid Airships",
  description: "Ferdinand von Zeppelin develops rigid airships, leading to widespread use of zeppelins.",
  img: "/api/placeholder/100/100",
  people: ['Ferdinand von Zeppelin'],
  row: 9,
    group: 'EED',
  connections: ['Hall–Héroult Process for Aluminum', "Charles Renard and Arthur Constantin's Le France"],
  category: "Engineering Experiments & Demonstrations"
},
  {
    date: '1901',
    location: 'France',
    title: 'Deutsch de la Meurthe Prize',
    description: 'Industrialist Henri Deutsch de la Meurthe offers prizes for airship and airplane feats...',
    img: '/api/placeholder/100/100',
    people: ['Henri Deutsch de la Meurthe'],
    category: 'Sociocultural Factors',
        group: 'SF',
    connections: [],
    row: 9
  },
{
  date: '1901',
  location: 'United States',
  title: "Gustave Whitehead's Reported Flight",
  description: "Gustave Whitehead reportedly flies in Connecticut, though documentation remains debated.",
  img: "/api/placeholder/100/100",
  people: ['Gustave Whitehead'],
  row: 9,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1902',
  location: 'France',
  title: "Georges Méliès's A Trip to the Moon",
  description: "Georges Méliès creates the iconic silent film, launching a bullet-shaped rocket to the Moon in a whimsical scenario.",
  img: "/api/placeholder/100/100",
  people: ['Georges Méliès'],
  row: 9,
  connections: ['First Moon Landing'],
    group: 'SF',
  category: "Sociocultural Factors"
},
{
  date: '1902',
  location: 'New Zealand',
  title: "Richard Pearse's Monoplane",
  description: "Richard Pearse builds a monoplane and makes brief, uncontrolled flights.",
  img: "/api/placeholder/100/100",
  people: ['Richard Pearse'],
  row: 9,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1903',
  location: 'Germany',
  title: "Karl Jatho's Powered Aircraft",
  description: "Karl Jatho builds an unstable monoplane that flies briefly but lacks thorough documentation.",
  img: "/api/placeholder/100/100",
  people: ['Karl Jatho'],
  row: 9,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
 date: '1903',
 location: 'Scotland',
 title: "Preston Watson's Alleged Flight",
 description: "Preston Watson allegedly flies, though no strong evidence exists.",
 img: "/api/placeholder/100/100",
 people: ['Preston Watson'],
 row: 9,
    group: 'EED',
 connections: [],
 category: "Engineering Experiments & Demonstrations"
},
{
  date: '1904',
  location: 'Germany',
  title: "Ludwig Prandtl’s Boundary-Layer Theory",
  description: "Prandtl’s insight that a thin layer of fluid near a surface governs most aerodynamic drag/energy loss...",
  img: "/api/placeholder/100/100",
  people: ['Ludwig Prandtl'],
  row: 9,
    group: 'CSB',
  connections: [],
  category: "Conceptual & Scientific Breakthroughs"
},
{
  date: '1906',
  location: 'Brazil/France',
  title: "Alberto Santos-Dumont's 14-bis Flight",
  description: "Alberto Santos-Dumont flies the 14-bis in Paris—the first powered airplane flight recognized by the Aéro-Club de France.",
  img: "/api/placeholder/100/100",
  people: ['Alberto Santos-Dumont'],
  row: 10,
    group: 'CSB-EED-SF',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1906',
  location: 'Germany/Russia',
  title: "Martin Wilhelm Kutta & Nikolai Zhukovsky’s Lift Theorem",
  description: "Established the relationship between circulation around an airfoil and the lift force...",
  img: "/api/placeholder/100/100",
  people: ['Martin Wilhelm Kutta', 'Nikolai Zhukovsky'],
  row: 9,
    group: 'CSB',
  connections: [],
  category: "Conceptual & Scientific Breakthroughs"
},
{
  date: '1907',
  location: 'Romania',
  title: "Traian Vuia's Monoplane",
  description: "Traian Vuia designs a monoplane with wheels that takes off unaided but flies only short distances.",
  img: "/api/placeholder/100/100",
  people: ['Traian Vuia'],
  row: 10,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1908',
  location: 'France',
  title: "Aída de Acosta Pilots Santos-Dumont's Dirigible",
  description: "Aída de Acosta becomes the first woman to pilot an aircraft: Santos-Dumont's dirigible No. 9.",
  img: "/api/placeholder/100/100",
  people: ['Aída de Acosta', 'Alberto Santos-Dumont'],
  row: 10,
    group: 'SF',
  connections: [],
  category: "Sociocultural Factors"
},
{
  date: '1908',
  location: 'England',
  title: "H.G. Wells's The War in the Air",
  description: "H.G. Wells's novel envisions how airplanes could revolutionize warfare, foreshadowing aerial battles of WWI.",
  img: "/api/placeholder/100/100",
  people: ['H.G. Wells'],
  row: 10,
  connections: [],
    group: 'SF',
  category: "Sociocultural Factors"
},
{
 date: '1908',
 location: 'United Kingdom',
 title: "John William Dunne's warplanes",
 description: "Develops tailless aircraft designs with military applications.",
 img: "/api/placeholder/100/100",
 people: ['John William Dunne'],
 row: 11,
    group: 'CSB-EED-SF',
 connections: [],
 category: "Conceptual & Scientific Breakthroughs"
},
{
  date: '1909',
  location: 'France/England',
  title: 'Louis Blériot Crosses the English Channel',
  description: "Louis Blériot's successful Channel crossing proves the airplane's viability for transportation.",
  img: "/api/placeholder/100/100",
  people: ['Louis Blériot'],
  row: 11,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1910',
  location: 'Brazil',
  title: "Dimitri Sensaud de Lavaud's Flight in Latin America",
  description: "Dimitri Sensaud de Lavaud completes the first powered flight in Latin America.",
  img: "/api/placeholder/100/100",
  people: ['Dimitri Sensaud de Lavaud'],
  row: 11,
    group: 'EED',
  connections: [],category: "Engineering Experiments & Demonstrations"
},
{
  date: '1910',
  location: 'France',
  title: "Henri Fabre's Seaplane Flight",
  description: "Henri Fabre achieves the first successful seaplane flight.",
  img: "/api/placeholder/100/100",
  people: ['Henri Fabre'],
  row: 12,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1911',
  location: 'United States',
  title: "Calbraith Perry Rodgers' Transcontinental Flight",
  description: "Calbraith Perry Rodgers completes the first transcontinental flight across the United States.",
  img: "/api/placeholder/100/100",
  people: ['Calbraith Perry Rodgers'],
  row: 12,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
  {
    date: '1914–1918',
    location: 'Europe/Worldwide',
    title: 'Military Demand in World War I',
    description: 'World War I massively accelerates aircraft innovation...',
    img: '/api/placeholder/100/100',
    people: ['Various WWI Aircraft Pioneers'],
    category: 'Sociocultural Factors',
        group: 'SF',
    connections: [],
    row: 12
  },
{
  date: '1918',
  location: 'France',
  title: "Henry Farman's Aircraft in World War I",
  description: "Henry Farman develops aircraft used in World War I, advancing military aviation.",
  img: "/api/placeholder/100/100",
  people: ['Henry Farman'],
  row: 12,
    group: 'CSB',
  connections: [],
  category: "Conceptual & Scientific Breakthroughs"
},
{
 date: '1910',
 location: 'Romania',
 title: "Henri Coandă's Coandă-1910",
 description: "Henri Coandă builds the Coandă-1910, possibly the first jet-propelled aircraft.",
 img: "/api/placeholder/100/100",
 people: ['Henri Coandă'],
 row: 13,
    group: 'EED',
 connections: [],
 category: "Engineering Experiments & Demonstrations"
},
{
  date: '1914',
  location: 'United States',
  title: 'First Commercial Airline',
  description: "The St. Petersburg-Tampa Airboat Line starts commercial flights, pioneering airline service.",
  img: "/api/placeholder/100/100",
  people: ['Thomas Benoist', 'Percival Fansler'],
  row: 13,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1928',
  location: 'Germany',
  title: 'The Graf Zeppelin',
  description: "The LZ 127 Graf Zeppelin, a large passenger-carrying rigid airship, enters commercial service...",
  img: "/api/placeholder/100/100",
  people: ['Ferdinand von Zeppelin'],
  row: 14,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
{
  date: '1947',
  location: 'United States',
  title: 'Breaking the Sound Barrier',
  description: "Chuck Yeager pilots the Bell X-1 to become the first to break the sound barrier in level flight.",
  img: "/api/placeholder/100/100",
  people: ['Chuck Yeager'],
  row: 14,
    group: 'EED',
  connections: [],
  category: "Engineering Experiments & Demonstrations"
},
  {
    date: '1969',
    location: 'United States',
    title: 'First Moon Landing',
    description: 'Neil Armstrong and Buzz Aldrin land on the Moon...',
    img: '/api/placeholder/100/100',
    people: ['Neil Armstrong', 'Buzz Aldrin'],
    row: 15,
        group: 'EED',
    connections: [],
    category: "Engineering Experiments & Demonstrations"
  },
    {
    date: '1957',
    location: 'USSR',
    title: 'Satellite Launch',
    description: 'First artificial satellite',
    img: '/api/placeholder/100/100',
    people: ['Sergei Korolev'],
    row: 15,
        group: 'SF',
    connections: [],
    category: "Sociocultural Factors"
  }
];

// --- Venn Diagram ---

// Prepare data for Venn.js
const vennData = [
  { sets: ['SF'], size: 0, label: 'Sociocultural Factors' }, // Start with size 0
  { sets: ['CSB'], size: 0, label: 'Conceptual & Scientific Breakthroughs' },
  { sets: ['EED'], size: 0, label: 'Engineering Experiments & Demonstrations' },
  { sets: ['SF', 'CSB'], size: 0, label: 'SF ∩ CSB' },
  { sets: ['CSB', 'EED'], size: 0, label: 'CSB ∩ EED' },
  { sets: ['SF', 'EED'], size: 0, label: 'SF ∩ EED' },
  { sets: ['SF', 'CSB', 'EED'], size: 0, label: 'SF ∩ CSB ∩ EED' },
];

// Count the number of items in each Venn region
timelineItems.forEach(item => {
    const groups = item.group.split('-'); // Handle items in multiple groups
    let region = null;
        if (groups.length === 1) {
            region = vennData.find(r => r.sets.length === 1 && r.sets[0] === item.group);
        }
    else if(groups.length === 2){
        region = vennData.find(r => r.sets.length === 2 && r.sets.includes(groups[0]) && r.sets.includes(groups[1]));
    }
        else if(groups.length === 3){
            region = vennData.find(r => r.sets.length === 3 && r.sets.includes(groups[0]) && r.sets.includes(groups[1]) && r.sets.includes(groups[2]));
        }


  if (region) {
    region.size += 1;
  }
});

// Create the Venn diagram
const vennChart = venn.VennDiagram()
  .width(400)
  .height(400);

d3.select("#visualization")
  .datum(vennData)
  .call(vennChart);


// --- Network Graph ---

// 1. Prepare Nodes and Links:
const nodes = timelineItems.map(item => ({
  id: item.title,  // Use title as unique ID
  group: item.group,
  ...item // Include all other properties for tooltips, etc.
}));

const links = [];
timelineItems.forEach(item => {
  if (item.connections) {
    item.connections.forEach(target => {
      // Check if the target node exists (avoids errors with typos)
      if (nodes.find(n => n.id === target)) {
        links.push({ source: item.title, target: target, value: 1 }); // You can adjust 'value'
      } else {
        console.warn(`Connection target not found: ${target} from ${item.title}`);
      }
    });
  }
});


// 2. Create SVG and Simulation:
const svg = d3.select("#visualization")
    .append("g"); // Group for the network graph, separate from Venn

const simulation = d3.forceSimulation(nodes)
  .force("link", d3.forceLink(links).id(d => d.id).distance(50)) // Increased distance
  .force("charge", d3.forceManyBody().strength(-50)) //Moderate repulsion
  .force("center", d3.forceCenter(650, 300))  // Center *next to* the Venn
    .force("collision", d3.forceCollide().radius(15));

// 3. Create Links (Lines):
const link = svg.append("g")
  .attr("class", "links")
  .selectAll("line")
  .data(links)
  .enter().append("line")
  .attr("class", "link")
  .attr("stroke-width", d => Math.sqrt(d.value));

// 4. Create Nodes (Circles):
const node = svg.append("g")
  .attr("class", "nodes")
  .selectAll("circle")
  .data(nodes)
  .enter().append("circle")
  .attr("class", "node")
  .attr("r", 8) // Increased radius
  .attr("fill", d => {
        const groups = d.group.split('-');
        if (groups.includes('SF')) return "red";
        if (groups.includes('CSB')) return "blue";
        if (groups.includes('EED')) return "green";
        return "gray";
    })
  .call(d3.drag()  // D3's built-in drag handling
      .on("start", dragstarted)
      .on("drag", dragged)
      .on("end", dragended));

// 5. Add Tooltips:
const tooltip = d3.select("#tooltip");

node.on("mouseover", (event, d) => {
    tooltip.style("display", "block")
           .html(`
               <strong>${d.title}</strong><br>
               Date: ${d.date}<br>
               Category: ${d.category}<br>
               Description: ${d.description}
           `)
           .style("left", (event.pageX + 10) + "px")
           .style("top", (event.pageY - 28) + "px");

    // Highlight connected nodes
    const connectedNodeIds = new Set();
    links.forEach(l => {
      if (l.source.id === d.id) connectedNodeIds.add(l.target.id);
      if (l.target.id === d.id) connectedNodeIds.add(l.source.id);
    });

    node.style("opacity", n => connectedNodeIds.has(n.id) || n.id === d.id ? 1 : 0.2);
    link.style("stroke-opacity", l => (l.source.id === d.id || l.target.id === d.id) ? 1 : 0.1);
  })
  .on("mouseout", () => {
    tooltip.style("display", "none");
    node.style("opacity", 1); // Reset opacity on mouseout
    link.style("stroke-opacity", 0.6);
  });



// 6. Update Positions on Tick:
simulation.on("tick", () => {
  link
    .attr("x1", d => d.source.x)
    .attr("y1", d => d.source.y)
    .attr("x2", d => d.target.x)
    .attr("y2", d => d.target.y);

  node
    .attr("cx", d => d.x)
    .attr("cy", d => d.y);
});



// --- Interactivity (Venn -> Network) ---

// Add click handlers to Venn regions
d3.selectAll(".venn-area").on("click", function(event, d) {
    const selectedSets = d.sets;

    // Filter nodes based on the selected Venn region
    node.style("opacity", n => {
        const nodeGroups = n.group.split('-'); // Handle multiple groups
        // Check if *any* of the node's groups are in the selected sets
        return selectedSets.every(set => nodeGroups.includes(set)) ? 1 : 0.1;
    });

   link.style("stroke-opacity", l => {
        const sourceGroups = l.source.group.split('-');
        const targetGroups = l.target.group.split('-');

        const sourceMatch = selectedSets.every(set => sourceGroups.includes(set));
        const targetMatch = selectedSets.every(set => targetGroups.includes(set));
        return sourceMatch && targetMatch ? 1 : 0.1
    });
});


// --- Drag Functions ---

function dragstarted(event) {
  if (!event.active) simulation.alphaTarget(0.3).restart();
  event.subject.fx = event.subject.x;
  event.subject.fy = event.subject.y;
}

function dragged(event) {
  event.subject.fx = event.x;
  event.subject.fy = event.y;
}

function dragended(event) {
  if (!event.active) simulation.alphaTarget(0);
  event.subject.fx = null;
  event.subject.fy = null;
}

</script>

</body>
</html>
